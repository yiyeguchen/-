# 基于计算机视觉的碎石粒度智能分析系统

## 项目概述

本项目是一个基于PyQt5和OpenCV的碎石粒度智能分析系统，专门用于分析碎石图像中的轮廓特征。系统采用模块化设计，具有清晰的代码结构和专业的用户界面。

## 功能特性

- 🖼️ **图像加载**: 支持多种图像格式的加载和显示
- 🎯 **演示模式**: 内置演示样本，快速体验分析功能
- 🔍 **轮廓分析**: 基于OpenCV的高精度轮廓检测和分析
- 📊 **统计分析**: 详细的面积、周长等统计信息
- 📈 **可视化图表**: 面积分布直方图和统计图表
- 🎨 **颜色编码**: 直观的颜色标记系统
- 📋 **技术报告**: 自动生成详细的分析报告

## 项目结构

```
.
├── main.py              # 主入口文件
├── app_ui.py            # UI模块 - 用户界面定义
├── image_analyzer.py    # 核心分析模块 - 图像处理算法
├── utilities.py         # 工具模块 - 辅助函数
├── requirements.txt     # 依赖包列表
├── README.md           # 项目说明文档
└── insta.py            # 原始单文件版本（已重构）
```

## 模块说明

### 1. main.py - 主入口模块
- 负责启动PyQt5应用程序
- 设置应用程序基本信息
- 初始化主窗口

### 2. app_ui.py - UI模块
- 包含所有Qt控件的定义和布局
- 处理用户界面事件
- 管理界面显示和更新

### 3. image_analyzer.py - 核心分析模块
- 实现轮廓检测算法
- 图像预处理和后处理
- 统计分析和数据计算

### 4. utilities.py - 工具模块
- 图像格式转换函数
- 演示数据生成
- 数值格式化工具

## 安装和运行

### 环境要求

- Python 3.7+
- Windows/Linux/macOS

### 安装步骤

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd Computer-Vision-Analysis-of-Crushed-Stone-Size-Fractions
   ```

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **运行程序**
   ```bash
   python main.py
   ```

## 使用指南

### 基本操作

1. **加载图像**
   - 点击"📁 Загрузить изображение"按钮
   - 选择碎石图像文件
   - 支持格式：JPG, PNG, BMP, TIFF等

2. **演示模式**
   - 点击"🎯 Демо-образец"按钮
   - 系统自动生成演示样本
   - 适合快速体验功能

3. **执行分析**
   - 点击"🔍 Контурный анализ"按钮
   - 系统自动进行轮廓检测和分析
   - 结果实时显示在界面上

4. **重置分析**
   - 点击"🔄 Сброс анализа"按钮
   - 清除当前分析结果
   - 恢复到原始图像状态

### 结果解读

#### 颜色编码
- 🔴 **红色轮廓**: 所有检测到的基础轮廓
- 🔵 **蓝色轮廓**: 面积最大的轮廓
- 🟢 **绿色轮廓**: 面积第二大的轮廓

#### 统计信息
- **总轮廓数量**: 检测到的轮廓总数
- **最大轮廓面积**: 最大轮廓的像素面积
- **最大轮廓周长**: 最大轮廓的像素周长
- **面积比例**: 最大轮廓占总面积的百分比

## 技术特点

### 图像处理算法
- **预处理**: 高斯模糊、灰度转换
- **边缘检测**: Canny边缘检测算法
- **轮廓提取**: OpenCV轮廓检测
- **特征分析**: 面积、周长、形状因子计算

### 用户界面设计
- **响应式布局**: 自适应窗口大小
- **现代化样式**: 基于Material Design
- **多语言支持**: 俄语界面
- **实时反馈**: 状态栏和进度提示

## 开发说明

### 代码规范
- 遵循PEP 8 Python编码规范
- 使用类型注解提高代码可读性
- 详细的文档字符串和注释
- 模块化设计，职责分离

### 扩展开发
- **添加新的分析算法**: 在`image_analyzer.py`中扩展
- **增强用户界面**: 在`app_ui.py`中修改
- **添加工具函数**: 在`utilities.py`中补充

## 故障排除

### 常见问题

1. **导入错误**
   ```
   ModuleNotFoundError: No module named 'PyQt5'
   ```
   **解决方案**: 确保已安装所有依赖包
   ```bash
   pip install -r requirements.txt
   ```

2. **图像加载失败**
   - 检查图像文件格式是否支持
   - 确认文件路径正确
   - 验证文件未损坏

3. **分析结果异常**
   - 确保图像质量良好
   - 检查图像对比度是否足够
   - 尝试调整分析参数

## 版本历史

- **v1.0** (当前版本)
  - 完成模块化重构
  - 实现基础轮廓分析功能
  - 添加演示模式和报告生成

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 联系方式

- **开发团队**: QS GROUP集团
- **技术支持**: 请通过GitHub Issues提交问题

---

*本项目专为学术研究和工程应用设计，符合现代软件工程最佳实践。*